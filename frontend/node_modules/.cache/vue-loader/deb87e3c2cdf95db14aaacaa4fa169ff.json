{"remainingRequest":"C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Awa\\SocialNetwork\\frontend\\src\\components\\Account.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Awa\\SocialNetwork\\frontend\\src\\components\\Account.vue","mtime":1620383097512},{"path":"C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQWNjb3VudCIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVwZGF0ZUJpbzogZmFsc2UsCiAgICAgIHVwZGF0ZVBzZXVkbzogZmFsc2UsCiAgICAgIHVwZGF0ZVBob3RvOiBmYWxzZSwKICAgICAgc2hvd1BzZXVkbzogdHJ1ZSwKICAgICAgc2hvd1Bob3RvOiB0cnVlLAogICAgICBzaG93QmlvOiB0cnVlLAogICAgICBpc1ZhbGlkOiB0cnVlLAogICAgICBvcHRpb25zOiBmYWxzZSwKICAgICAgbmV3UHNldWRvOiAiIiwKICAgICAgbmV3QmlvOiAiIiwKICAgICAgcHNldWRvUnVsZXM6IFsKICAgICAgICAodikgPT4gdi5sZW5ndGggPD0gMzAgfHwgIk1heCAzMCBjYXJhY3TDqHJlcyIsCiAgICAgICAgKHYpID0+ICEhdiB8fCAiTGUgcHNldWRvIGVzdCBvYmxpZ2F0b2lyZSIsCiAgICAgIF0sCiAgICAgIGJpb1J1bGVzOiBbKHYpID0+IHYubGVuZ3RoIDw9IDQwMCB8fCAiTWF4IDQwMCBjYXJhY3TDqHJlcyJdLAogICAgICBmaWxlOiAiIiwKICAgICAgbWVzc2FnZVJldG91cjogbnVsbCwKICAgICAgZXJyb3JNZXNzYWdlOiBudWxsLAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICB1c2VyKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVycy51c2VyOwogICAgfSwKICAgIGlzTG9nZ2VkSW4oKSB7CiAgICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS5pc0xvZ2dlZEluKSB7CiAgICAgICAgcmV0dXJuICJwaW5rIjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gIiI7CiAgICAgIH0KICAgIH0sCiAgfSwKICBiZWZvcmVNb3VudCgpIHsKICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRVc2VyQnlJZCIpOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0QmFja0hvbWUoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvIik7CiAgICB9LAogICAgdG9nZ2xlUHNldWRvKCkgewogICAgICB0aGlzLnVwZGF0ZVBzZXVkbyA9IHRydWU7CiAgICAgIHRoaXMuc2hvd1BzZXVkbyA9IGZhbHNlOwogICAgICB0aGlzLm9wdGlvbnMgPSB0cnVlOwogICAgfSwKICAgIHRvZ2dsZVBob3RvKCkgewogICAgICB0aGlzLnVwZGF0ZVBob3RvID0gdHJ1ZTsKICAgICAgdGhpcy5zaG93SW1hZ2UgPSBmYWxzZTsKICAgICAgdGhpcy5vcHRpb25zID0gdHJ1ZTsKICAgICAgdGhpcy5zaG93UGhvdG8gPSBmYWxzZTsKICAgIH0sCiAgICB0b2dnbGVCaW8oKSB7CiAgICAgIHRoaXMudXBkYXRlQmlvID0gdHJ1ZTsKICAgICAgdGhpcy5zaG93QmlvID0gZmFsc2U7CiAgICAgIHRoaXMub3B0aW9ucyA9IHRydWU7CiAgICB9LAogICAgdXBsb2FkSW1hZ2UoKSB7CiAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLiRyZWZzLmZpbGUuZmlsZXNbMF07CiAgICAgIHRoaXMuZmlsZSA9IGZpbGU7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZmlsZSk7CiAgICB9LAogICAgb25TdWJtaXQoKSB7CiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgicHNldWRvIiwgdGhpcy5uZXdQc2V1ZG8pOwogICAgICBmb3JtRGF0YS5hcHBlbmQoImJpbyIsIHRoaXMubmV3QmlvKTsKICAgICAgaWYgKHRoaXMuZmlsZSAhPT0gbnVsbCkgewogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgiaW1hZ2UiLCB0aGlzLmZpbGUpOwogICAgICB9CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRVc2VycyIpOwogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0VXNlckJ5SWQiLCB0aGlzLnVzZXIuaWQpOwogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgidXBkYXRlQWNjb3VudCIsIGZvcm1EYXRhKTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldFVzZXJCeUlkIiwgdGhpcy51c2VyLmlkKTsKICAgICAgdGhpcy51cGRhdGVCaW8gPSBmYWxzZTsKICAgICAgdGhpcy51cGRhdGVQaG90byA9IGZhbHNlOwogICAgICB0aGlzLnVwZGF0ZVBzZXVkbyA9IGZhbHNlOwogICAgICB0aGlzLm9wdGlvbnMgPSBmYWxzZTsKICAgICAgdGhpcy5zaG93QmlvID0gdHJ1ZTsKICAgICAgdGhpcy5zaG93UGhvdG8gPSB0cnVlOwogICAgICB0aGlzLnNob3dQc2V1ZG8gPSB0cnVlOwogICAgfSwKICAgIGRlbGV0ZUFjY291bnQoaWQpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImRlbGV0ZUFjY291bnQiLCBpZCk7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJsb2dPdXQiKTsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5nZXRCYWNrSG9tZSgpOwogICAgICB9LCAyMDAwKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["Account.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Account.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-container fluid class=\"signup-container\">\n    <v-layout v-if=\"$store.state.isLoggedIn\" row class=\"account-box mb-5\">\n      <v-col lg=\"4\" md=\"6\" sm=\"7\" class=\"mx-auto\">\n        <v-card class=\"account-card d-flex flex-column\" elevation=\"4\" xs6>\n          <div class=\"profil-top pb-3 \">\n            <v-btn to=\"/posts\" class=\"mx-2 return-btn\" x-small>\n              Retour\n            </v-btn>\n            <v-card-title flat dense dark class=\"profil-title mr-3\"\n              ><h1 class=\"titre\">Modifier le profil</h1>\n            </v-card-title>\n            <div class=\"delete-account\">\n              <v-tooltip v-if=\"!$store.state.user.admin === true\" bottom>\n                <template v-slot:activator=\"{ on, attrs }\">\n                  <v-btn\n                    @click=\"deleteAccount(user.id)\"\n                    class=\"mx-2\"\n                    fab\n                    x-small\n                    v-bind=\"attrs\"\n                    v-on=\"on\"\n                  >\n                    <v-icon small class=\" rounded-circle \">\n                      $vuetify.icons.delete\n                    </v-icon>\n                  </v-btn>\n                </template>\n                <span>Supprimer le compte</span>\n              </v-tooltip>\n            </div>\n          </div>\n          <v-divider></v-divider>\n          <div class=\"profil-middle mt-3 \">\n            <v-card-title\n              v-if=\"showPseudo\"\n              dark\n              class=\" profil-middle__left d-flex justify-space-between\"\n            >\n              <span class=\"pseudo\"> Salut {{ user.pseudo }} ! </span>\n              <v-btn @click=\"togglePseudo\" x-small>\n                Modifier\n              </v-btn>\n            </v-card-title>\n            <v-text-field\n              v-if=\"updatePseudo\"\n              label=\"Nouveau pseudo\"\n              v-model=\"newPseudo\"\n              :rules=\"pseudoRules\"\n              required\n              counter=\"30\"\n              hint=\"Le pseudo doit avoir 3 caractÃ¨res min et 30 max\"\n              class=\"input-group--focused  mx-3\"\n            ></v-text-field>\n\n            <v-divider></v-divider>\n            <v-card-title\n              v-if=\"showPhoto\"\n              class=\"profil-middle__right d-flex  flex-column\"\n            >\n              <v-avatar size=\"96px\" class=\"mt-2\">\n                <img\n                  rounded\n                  v-if=\"user.photo\"\n                  :src=\"user.photo\"\n                  alt=\"Photo de profil\"\n                />\n                <v-icon\n                  :color=\"isLoggedIn\"\n                  size=\"96px\"\n                  aria-label=\"avatar\"\n                  v-else\n                  >$vuetify.icons.account</v-icon\n                >\n              </v-avatar>\n              <v-btn @click=\"togglePhoto\" class=\"mx-2\" x-small>\n                Changer\n              </v-btn>\n            </v-card-title>\n\n            <div v-if=\"updatePhoto\" class=\"d-flex justify-center\">\n              <label for=\"image\" class=\"mr-3\">Photo</label>\n              <input\n                @change=\"uploadImage\"\n                type=\"file\"\n                accept=\"image/png, image/jpeg,\n                    image/bmp, image/gif\"\n                ref=\"file\"\n                name=\"image\"\n                class=\"input-group--focused\"\n              />\n            </div>\n          </div>\n          <v-divider></v-divider>\n          <v-card-text v-if=\"showBio\" class=\" bio\">\n            <div\n              class=\"d-flex flex-column justify-space-between\"\n              max-width=\"70%\"\n            >\n              <strong>Ta bio: </strong>\n              <div>\n                <span v-if=\"!user.bio\"> Parle nous de toi ðŸ˜Š</span>\n                <span class=\"bio-field\">{{ user.bio }}</span>\n              </div>\n            </div>\n            <v-btn @click=\"toggleBio\" class=\"mx-2 mt-2 mr-n6\" x-small>\n              Modifier\n            </v-btn>\n          </v-card-text>\n          <v-textarea\n            v-if=\"updateBio\"\n            label=\"Bio\"\n            v-model=\"newBio\"\n            :rules=\"bioRules\"\n            solo\n            name=\"input-7-4\"\n            class=\"input-group--focused bio\"\n          >\n          </v-textarea>\n          <div>\n            <v-card-text v-if=\"options\" class=\"font-weight-light\">\n              <br />\n              <div class=\"danger-alert\" v-html=\"errorMessage\" />\n              <div class=\"danger-alert\" v-html=\"messageRetour\" />\n\n              <div class=\"d-flex justify-center\">\n                <v-btn @click=\"onSubmit(user.id)\" :disabled=\"!isValid\"\n                  >Envoyer</v-btn\n                >\n              </div>\n            </v-card-text>\n          </div>\n        </v-card>\n      </v-col>\n    </v-layout>\n    <v-card v-else>\n      <v-card-title class=\"post-title-box\">\n        <div class=\" d-flex flex-column update-title pl-3 pb-5 \">\n          <span class=\"title font-weight-light post-title pb-5 \"\n            >Votre compte a Ã©tÃ© supprimÃ©</span\n          >\n        </div>\n      </v-card-title>\n    </v-card>\n  </v-container>\n</template>\n\n<script>\nexport default {\n  name: \"Account\",\n  data() {\n    return {\n      updateBio: false,\n      updatePseudo: false,\n      updatePhoto: false,\n      showPseudo: true,\n      showPhoto: true,\n      showBio: true,\n      isValid: true,\n      options: false,\n      newPseudo: \"\",\n      newBio: \"\",\n      pseudoRules: [\n        (v) => v.length <= 30 || \"Max 30 caractÃ¨res\",\n        (v) => !!v || \"Le pseudo est obligatoire\",\n      ],\n      bioRules: [(v) => v.length <= 400 || \"Max 400 caractÃ¨res\"],\n      file: \"\",\n      messageRetour: null,\n      errorMessage: null,\n    };\n  },\n  computed: {\n    user() {\n      return this.$store.getters.user;\n    },\n    isLoggedIn() {\n      if (this.$store.state.isLoggedIn) {\n        return \"pink\";\n      } else {\n        return \"\";\n      }\n    },\n  },\n  beforeMount() {\n    this.$store.dispatch(\"getUserById\");\n  },\n  methods: {\n    getBackHome() {\n      this.$router.push(\"/\");\n    },\n    togglePseudo() {\n      this.updatePseudo = true;\n      this.showPseudo = false;\n      this.options = true;\n    },\n    togglePhoto() {\n      this.updatePhoto = true;\n      this.showImage = false;\n      this.options = true;\n      this.showPhoto = false;\n    },\n    toggleBio() {\n      this.updateBio = true;\n      this.showBio = false;\n      this.options = true;\n    },\n    uploadImage() {\n      const file = this.$refs.file.files[0];\n      this.file = file;\n      console.log(this.file);\n    },\n    onSubmit() {\n      const formData = new FormData();\n      formData.append(\"pseudo\", this.newPseudo);\n      formData.append(\"bio\", this.newBio);\n      if (this.file !== null) {\n        formData.append(\"image\", this.file);\n      }\n      this.$store.dispatch(\"getUsers\");\n      this.$store.dispatch(\"getUserById\", this.user.id);\n      this.$store.dispatch(\"updateAccount\", formData);\n      this.$store.dispatch(\"getUserById\", this.user.id);\n      this.updateBio = false;\n      this.updatePhoto = false;\n      this.updatePseudo = false;\n      this.options = false;\n      this.showBio = true;\n      this.showPhoto = true;\n      this.showPseudo = true;\n    },\n    deleteAccount(id) {\n      this.$store.dispatch(\"deleteAccount\", id);\n      this.$store.dispatch(\"logOut\");\n      setTimeout(() => {\n        this.getBackHome();\n      }, 2000);\n    },\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"scss\">\n.v-avatar {\n  margin-top: -30px;\n  margin-right: 1em;\n}\n.account-card {\n  display: flex;\n  justify-content: space-around;\n  margin-top: 2em;\n  margin-bottom: 4em;\n}\n.profil-top {\n  display: flex;\n  justify-content: space-between;\n  padding-top: 1em;\n}\n.profil-middle {\n  width: 100%;\n  margin: auto !important;\n}\n.profil-title {\n  padding: 0;\n}\n</style>"]}]}
{"remainingRequest":"C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Awa\\SocialNetwork\\frontend\\src\\components\\Account.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Awa\\SocialNetwork\\frontend\\src\\components\\Account.vue","mtime":1620837977927},{"path":"C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFjY291bnQiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1cGRhdGVCaW86IGZhbHNlLAogICAgICB1cGRhdGVVc2VybmFtZTogZmFsc2UsCiAgICAgIHVzZXJuYW1lOiB0cnVlLAogICAgICBzaG93QmlvOiB0cnVlLAogICAgICBpc1ZhbGlkOiB0cnVlLAogICAgICBvcHRpb25zOiBmYWxzZSwKICAgICAgbmV3UHNldWRvOiAiIiwKICAgICAgbmV3QmlvOiAiIiwKICAgICAgcHNldWRvUnVsZXM6IFsKICAgICAgICAodikgPT4gdi5sZW5ndGggPD0gNDUgfHwgIk1heCA0NSBjYXJhY3TDqHJlcyIsCiAgICAgICAgKHYpID0+ICEhdiB8fCAiTGUgcHNldWRvIGVzdCBvYmxpZ2F0b2lyZSIsCiAgICAgIF0sCiAgICAgIGZpbGU6ICIiLAogICAgICBtZXNzYWdlUmV0b3VyOiBudWxsLAogICAgICBlcnJvck1lc3NhZ2U6IG51bGwsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHVzZXIoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzLnVzZXI7CiAgICB9LAogICAgY29ubmVjdGVkKCkgewogICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUuY29ubmVjdGVkKSB7CiAgICAgICAgcmV0dXJuCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICIiOwogICAgICB9CiAgICB9LAogIH0sCiAgYmVmb3JlTW91bnQoKSB7CiAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0VXNlckJ5SWQiKTsKICB9LAogIG1ldGhvZHM6IHsKCiAgICBnZXRCYWNrSG9tZSgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi8iKTsKICAgIH0sCiAgICBtb2RpZnkoKSB7CiAgICAgIHRoaXMudXBkYXRlVXNlcm5hbWUgPSB0cnVlOwogICAgICB0aGlzLnVzZXJuYW1lID0gZmFsc2U7CiAgICAgIHRoaXMub3B0aW9ucyA9IHRydWU7CiAgICB9LAogICAgCiAgICBiaW8oKSB7CiAgICAgIHRoaXMudXBkYXRlQmlvID0gdHJ1ZTsKICAgICAgdGhpcy5zaG93QmlvID0gZmFsc2U7CiAgICAgIHRoaXMub3B0aW9ucyA9IHRydWU7CiAgICB9LAogICAgdXBsb2FkSW1hZ2UoKSB7CiAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLiRyZWZzLmZpbGUuZmlsZXNbMF07CiAgICAgIHRoaXMuZmlsZSA9IGZpbGU7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZmlsZSk7CiAgICB9LAogICAgb25TdWJtaXQoKSB7CiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgicHNldWRvIiwgdGhpcy5uZXdQc2V1ZG8pOwogICAgICBmb3JtRGF0YS5hcHBlbmQoImJpbyIsIHRoaXMubmV3QmlvKTsKICAgICAgaWYgKHRoaXMuZmlsZSAhPT0gbnVsbCkgewogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgiaW1hZ2UiLCB0aGlzLmZpbGUpOwogICAgICB9CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRVc2VycyIpOwogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0VXNlckJ5SWQiLCB0aGlzLnVzZXIuaWQpOwogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgidXBkYXRlQWNjb3VudCIsIGZvcm1EYXRhKTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldFVzZXJCeUlkIiwgdGhpcy51c2VyLmlkKTsKICAgICAgdGhpcy51cGRhdGVCaW8gPSBmYWxzZTsKICAgICAgdGhpcy51cGRhdGVVc2VybmFtZSA9IGZhbHNlOwogICAgICB0aGlzLm9wdGlvbnMgPSBmYWxzZTsKICAgICAgdGhpcy5zaG93QmlvID0gdHJ1ZTsKICAgICAgdGhpcy51c2VybmFtZSA9IHRydWU7CiAgICB9LAogICAgZGVsZXRlQWNjb3VudChpZCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZGVsZXRlQWNjb3VudCIsIGlkKTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImxvZ091dCIpOwogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLmdldEJhY2tIb21lKCk7CiAgICAgIH0sIDIwMDApOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["Account.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Account.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  \n      <v-card \n        v-if=\"$store.state.connected\"\n        class=\"mx-auto my-12\"\n        max-width=\"800\"\n        >\n        \n            <v-btn to=\"/posts\">\n          <i class=\"fas fa-arrow-left\"></i>\n            </v-btn>\n            <v-card-title>\n              <h1>Modifier le profil</h1>\n            </v-card-title>\n            <v-card-text>\n            <div\n              v-if=\"username\"\n            >\n            <h6>Nom d'utilisateur:</h6>\n            <div class=\"setmodification\">\n              <p> {{ user.pseudo }} </p>\n              <v-btn @click=\"modify\" x-small>\n                Modifier\n              </v-btn>\n              </div>\n            </div>\n            <v-text-field\n              v-if=\"updateUsername\"\n              label=\"Entrez votre nouveau nom d'utilisateur!\"\n              v-model=\"newPseudo\"\n              :rules=\"pseudoRules\"\n              required\n              counter=\"45\"\n            ></v-text-field>\n            </v-card-text>\n\n          <v-divider class=\"mx-4\"></v-divider>\n\n          <v-card-text v-if=\"showBio\">\n              <h6>Bio:</h6>\n              <div class=\"setmodification\">\n                <p v-if=\"!user.bio\"> A propos de moi...</p>\n                <p>{{ user.bio }}</p>\n            <v-btn @click=\"bio\" x-small>\n              Modifier\n            </v-btn>\n            </div>\n          </v-card-text>\n\n          <v-text-field\n            label=\"Entrer votre nouvelle bio!\"\n            v-if=\"updateBio\"\n            v-model=\"newBio\"\n          >\n          </v-text-field>\n          <div>\n            <v-card-text v-if=\"options\" class=\"msg\">\n              <div class=\"danger-alert\" v-html=\"errorMessage\" />\n              <div class=\"danger-alert\" v-html=\"messageRetour\" />\n\n              <div class=\"d-flex justify-center\">\n                <v-btn @click=\"onSubmit(user.id)\" :disabled=\"!isValid\"\n                  >Envoyer</v-btn\n                >\n              </div>\n            </v-card-text>\n          </div>\n        </v-card>\n</template>\n\n<script>\n\nexport default {\n  name: \"Account\",\n  data() {\n    return {\n      updateBio: false,\n      updateUsername: false,\n      username: true,\n      showBio: true,\n      isValid: true,\n      options: false,\n      newPseudo: \"\",\n      newBio: \"\",\n      pseudoRules: [\n        (v) => v.length <= 45 || \"Max 45 caractÃ¨res\",\n        (v) => !!v || \"Le pseudo est obligatoire\",\n      ],\n      file: \"\",\n      messageRetour: null,\n      errorMessage: null,\n    };\n  },\n  computed: {\n    user() {\n      return this.$store.getters.user;\n    },\n    connected() {\n      if (this.$store.state.connected) {\n        return\n      } else {\n        return \"\";\n      }\n    },\n  },\n  beforeMount() {\n    this.$store.dispatch(\"getUserById\");\n  },\n  methods: {\n\n    getBackHome() {\n      this.$router.push(\"/\");\n    },\n    modify() {\n      this.updateUsername = true;\n      this.username = false;\n      this.options = true;\n    },\n    \n    bio() {\n      this.updateBio = true;\n      this.showBio = false;\n      this.options = true;\n    },\n    uploadImage() {\n      const file = this.$refs.file.files[0];\n      this.file = file;\n      console.log(this.file);\n    },\n    onSubmit() {\n      const formData = new FormData();\n      formData.append(\"pseudo\", this.newPseudo);\n      formData.append(\"bio\", this.newBio);\n      if (this.file !== null) {\n        formData.append(\"image\", this.file);\n      }\n      this.$store.dispatch(\"getUsers\");\n      this.$store.dispatch(\"getUserById\", this.user.id);\n      this.$store.dispatch(\"updateAccount\", formData);\n      this.$store.dispatch(\"getUserById\", this.user.id);\n      this.updateBio = false;\n      this.updateUsername = false;\n      this.options = false;\n      this.showBio = true;\n      this.username = true;\n    },\n    deleteAccount(id) {\n      this.$store.dispatch(\"deleteAccount\", id);\n      this.$store.dispatch(\"logOut\");\n      setTimeout(() => {\n        this.getBackHome();\n      }, 2000);\n    },\n  },\n};\n</script>\n\n<style>\n.v-avatar {\n  margin-top: -30px;\n  margin-right: 1em;\n}\n.account-card {\n  display: flex;\n  justify-content: space-around;\n  margin-top: 2em;\n  margin-bottom: 4em;\n}\n.profil-top {\n  display: flex;\n  justify-content: space-between;\n  padding-top: 1em;\n}\n.profil-middle {\n  width: 100%;\n  margin: auto !important;\n}\n.profil-title {\n  padding: 0;\n}\n\n.signup-container{\n  padding: 20px;\n}\n.setmodification{\n  display: flex;\n  justify-content: space-between;\n}\n.msg{\n  display: block;\n}\n</style>"]}]}
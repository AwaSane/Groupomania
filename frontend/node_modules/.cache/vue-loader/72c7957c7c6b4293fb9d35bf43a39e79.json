{"remainingRequest":"C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Awa\\SocialNetwork\\frontend\\src\\components\\Profil.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Awa\\SocialNetwork\\frontend\\src\\components\\Profil.vue","mtime":1621367109767},{"path":"C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlByb2ZpbCIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVwZGF0ZUJpbzogZmFsc2UsCiAgICAgIHVwZGF0ZVVzZXJuYW1lOiBmYWxzZSwKICAgICAgdXNlcm5hbWU6IHRydWUsCiAgICAgIHNob3dCaW86IHRydWUsCiAgICAgIGlzVmFsaWQ6IHRydWUsCiAgICAgIG9wdGlvbnM6IGZhbHNlLAogICAgICBuZXdQc2V1ZG86ICIiLAogICAgICBuZXdCaW86ICIiLAogICAgICB1c2VybmFtZVJ1bGVzOiBbCiAgICAgICAgKHYpID0+IHYubGVuZ3RoIDw9IDQ1IHx8ICJNYXggNDUgY2FyYWN0w6hyZXMiLAogICAgICAgICh2KSA9PiAhIXYgfHwgIkxlIHBzZXVkbyBlc3Qgb2JsaWdhdG9pcmUiLAogICAgICBdLAogICAgICBmaWxlOiAiIiwKICAgICAgbWVzc2FnZVJldG91cjogbnVsbCwKICAgICAgZXJyb3JNZXNzYWdlOiBudWxsLAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICB1c2VyKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVycy51c2VyOwogICAgfSwKICAgIGNvbm5lY3RlZCgpIHsKICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLmNvbm5lY3RlZCkgewogICAgICAgIHJldHVybgogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAiIjsKICAgICAgfQogICAgfSwKICB9LAogIGJlZm9yZU1vdW50KCkgewogICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldFVzZXJCeUlkIik7CiAgfSwKICBtZXRob2RzOiB7CgogICAgZ2V0QmFja0hvbWUoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvIik7CiAgICB9LAogICAgbW9kaWZ5KCkgewogICAgICB0aGlzLnVwZGF0ZVVzZXJuYW1lID0gdHJ1ZTsKICAgICAgdGhpcy51c2VybmFtZSA9IGZhbHNlOwogICAgICB0aGlzLm9wdGlvbnMgPSB0cnVlOwogICAgfSwKICAgIAogICAgYmlvKCkgewogICAgICB0aGlzLnVwZGF0ZUJpbyA9IHRydWU7CiAgICAgIHRoaXMuc2hvd0JpbyA9IGZhbHNlOwogICAgICB0aGlzLm9wdGlvbnMgPSB0cnVlOwogICAgfSwKICAgIHVwbG9hZEltYWdlKCkgewogICAgICBjb25zdCBmaWxlID0gdGhpcy4kcmVmcy5maWxlLmZpbGVzWzBdOwogICAgICB0aGlzLmZpbGUgPSBmaWxlOwogICAgICBjb25zb2xlLmxvZyh0aGlzLmZpbGUpOwogICAgfSwKICAgIG9uU3VibWl0KCkgewogICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoInBzZXVkbyIsIHRoaXMubmV3UHNldWRvKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCJiaW8iLCB0aGlzLm5ld0Jpbyk7CiAgICAgIGlmICh0aGlzLmZpbGUgIT09IG51bGwpIHsKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImltYWdlIiwgdGhpcy5maWxlKTsKICAgICAgfQogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0VXNlcnMiKTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldFVzZXJCeUlkIiwgdGhpcy51c2VyLmlkKTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInVwZGF0ZVByb2ZpbCIsIGZvcm1EYXRhKTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldFVzZXJCeUlkIiwgdGhpcy51c2VyLmlkKTsKICAgICAgdGhpcy51cGRhdGVCaW8gPSBmYWxzZTsKICAgICAgdGhpcy51cGRhdGVVc2VybmFtZSA9IGZhbHNlOwogICAgICB0aGlzLm9wdGlvbnMgPSBmYWxzZTsKICAgICAgdGhpcy5zaG93QmlvID0gdHJ1ZTsKICAgICAgdGhpcy51c2VybmFtZSA9IHRydWU7CiAgICB9LAoKICB9LAp9Owo="},{"version":3,"sources":["Profil.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"Profil.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  \n      <v-card \n        v-if=\"$store.state.connected\"\n        class=\"mx-auto my-12\"\n        max-width=\"800\"\n        >\n        \n            <v-btn to=\"/posts\">\n          <i class=\"fas fa-arrow-left\"></i>\n            </v-btn>\n            <v-card-title>\n              <h1>Modifier le profil</h1>\n            </v-card-title>\n            <v-card-text>\n            <div\n              v-if=\"username\"\n            >\n            <h6>Nom d'utilisateur:</h6>\n            <div class=\"setmodification\">\n              <p> {{ user.pseudo }} </p>\n              <v-btn @click=\"modify\" x-small>\n                Modifier\n              </v-btn>\n              </div>\n            </div>\n            <v-text-field\n              v-if=\"updateUsername\"\n              label=\"Entrez votre nouveau nom d'utilisateur!\"\n              v-model=\"newPseudo\"\n              :rules=\"usernameRules\"\n              required\n              counter=\"45\"\n            ></v-text-field>\n            </v-card-text>\n\n          <v-divider class=\"mx-4\"></v-divider>\n\n          <v-card-text v-if=\"showBio\">\n              <h6>Bio:</h6>\n              <div class=\"setmodification\">\n                <p v-if=\"!user.bio\"> A propos de moi...</p>\n                <p>{{ user.bio }}</p>\n            <v-btn @click=\"bio\" x-small>\n              Modifier\n            </v-btn>\n            </div>\n          </v-card-text>\n\n          <v-text-field\n            label=\"Entrer votre nouvelle bio!\"\n            v-if=\"updateBio\"\n            v-model=\"newBio\"\n          >\n          </v-text-field>\n          <div>\n            <v-card-text v-if=\"options\" class=\"msg\">\n              <div class=\"danger-alert\" v-html=\"errorMessage\" />\n              <div class=\"danger-alert\" v-html=\"messageRetour\" />\n\n\n              <div class=\"d-flex justify-center\">\n                <v-btn @click=\"onSubmit(user.id)\" :disabled=\"!isValid\"\n                  >Envoyer</v-btn\n                >\n              </div>\n            </v-card-text>\n          </div>\n        </v-card>\n</template>\n\n<script>\n\nexport default {\n  name: \"Profil\",\n  data() {\n    return {\n      updateBio: false,\n      updateUsername: false,\n      username: true,\n      showBio: true,\n      isValid: true,\n      options: false,\n      newPseudo: \"\",\n      newBio: \"\",\n      usernameRules: [\n        (v) => v.length <= 45 || \"Max 45 caractÃ¨res\",\n        (v) => !!v || \"Le pseudo est obligatoire\",\n      ],\n      file: \"\",\n      messageRetour: null,\n      errorMessage: null,\n    };\n  },\n  computed: {\n    user() {\n      return this.$store.getters.user;\n    },\n    connected() {\n      if (this.$store.state.connected) {\n        return\n      } else {\n        return \"\";\n      }\n    },\n  },\n  beforeMount() {\n    this.$store.dispatch(\"getUserById\");\n  },\n  methods: {\n\n    getBackHome() {\n      this.$router.push(\"/\");\n    },\n    modify() {\n      this.updateUsername = true;\n      this.username = false;\n      this.options = true;\n    },\n    \n    bio() {\n      this.updateBio = true;\n      this.showBio = false;\n      this.options = true;\n    },\n    uploadImage() {\n      const file = this.$refs.file.files[0];\n      this.file = file;\n      console.log(this.file);\n    },\n    onSubmit() {\n      const formData = new FormData();\n      formData.append(\"pseudo\", this.newPseudo);\n      formData.append(\"bio\", this.newBio);\n      if (this.file !== null) {\n        formData.append(\"image\", this.file);\n      }\n      this.$store.dispatch(\"getUsers\");\n      this.$store.dispatch(\"getUserById\", this.user.id);\n      this.$store.dispatch(\"updateProfil\", formData);\n      this.$store.dispatch(\"getUserById\", this.user.id);\n      this.updateBio = false;\n      this.updateUsername = false;\n      this.options = false;\n      this.showBio = true;\n      this.username = true;\n    },\n\n  },\n};\n</script>\n\n<style>\n.v-avatar {\n  margin-top: -30px;\n  margin-right: 1em;\n}\n.profil-card {\n  display: flex;\n  justify-content: space-around;\n  margin-top: 2em;\n  margin-bottom: 4em;\n}\n.profil-top {\n  display: flex;\n  justify-content: space-between;\n  padding-top: 1em;\n}\n.profil-middle {\n  width: 100%;\n  margin: auto !important;\n}\n.profil-title {\n  padding: 0;\n}\n\n.signup-container{\n  padding: 20px;\n}\n.setmodification{\n  display: flex;\n  justify-content: space-between;\n}\n.msg{\n  display: block;\n}\n</style>"]}]}
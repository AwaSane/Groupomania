{"remainingRequest":"C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Awa\\SocialNetwork\\frontend\\src\\components\\Posts.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Awa\\SocialNetwork\\frontend\\src\\components\\Posts.vue","mtime":1621595327895},{"path":"C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJQb3N0cyIsCiAgcHJvcHM6IHsKICAgIHBvc3Q6IHsKICAgICAgdHlwZTogT2JqZWN0CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvdzogZmFsc2UsCiAgICAgIHVzZXI6IGZhbHNlLAogICAgICB1cGRhdGU6IGZhbHNlLAogICAgICBpc1ZhbGlkOiB0cnVlLAogICAgICBydWxlczogewogICAgICAgIHJlcXVpcmVkOiBmdW5jdGlvbiByZXF1aXJlZCh2YWx1ZSkgewogICAgICAgICAgcmV0dXJuICEhdmFsdWUgfHwgIkNoYW1wcyByZWNxdWlzIjsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG1lc3NhZ2VSZXRvdXI6IG51bGwsCiAgICAgIGVycm9yTWVzc2FnZTogbnVsbCwKICAgICAgZGF0YTogewogICAgICAgIGNvbW1lbnRNZXNzYWdlOiAiIiwKICAgICAgICBjb21tZW50UHNldWRvOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnBzZXVkbwogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgcmVmcmVzaDogZnVuY3Rpb24gcmVmcmVzaCgpIHsKICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgfSwKICAgIGdldFByb2ZpbGU6IGZ1bmN0aW9uIGdldFByb2ZpbGUoaWQpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9wcm9maWwvIi5jb25jYXQoaWQpKTsKICAgIH0sCiAgICBkZWxldGVQb3N0OiBmdW5jdGlvbiBkZWxldGVQb3N0KCkgewogICAgICB0aGlzLiRlbWl0KCJkZWxldGVQb3N0IiwgdGhpcy5wb3N0LmlkKSwgdGhpcy5yZWZyZXNoKCk7CiAgICB9LAogICAgZ2V0T25lUG9zdDogZnVuY3Rpb24gZ2V0T25lUG9zdChpZCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgicG9zdHMvIi5jb25jYXQoaWQpKTsKICAgIH0sCiAgICBvblN1Ym1pdENvbW1lbnQ6IGZ1bmN0aW9uIG9uU3VibWl0Q29tbWVudChpZCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0UG9zdHMiKTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImNvbW1lbnRQb3N0IiwgewogICAgICAgIGlkOiBpZCwKICAgICAgICBkYXRhOiB0aGlzLmRhdGEKICAgICAgfSk7CiAgICAgIHRoaXMuZGF0YS5jb21tZW50TWVzc2FnZSA9ICIiOwogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0UG9zdHMiKTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldFBvc3RCeUlkIiwgdGhpcy5wb3N0LmlkKTsKICAgIH0sCiAgICBkZWxldGVDb21tZW50OiBmdW5jdGlvbiBkZWxldGVDb21tZW50KGlkKSB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJkZWxldGVDb21tZW50IiwgaWQpLCB0aGlzLnJlZnJlc2goKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Posts.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuKA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA;AADA,GAFA;AAOA,EAAA,IAAA,EAAA,gBAAA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,IAAA,EAAA,KAFA;AAGA,MAAA,MAAA,EAAA,KAHA;AAIA,MAAA,OAAA,EAAA,IAJA;AAKA,MAAA,KAAA,EAAA;AACA,QAAA,QAAA,EAAA,kBAAA,KAAA;AAAA,iBAAA,CAAA,CAAA,KAAA,IAAA,gBAAA;AAAA;AADA,OALA;AAQA,MAAA,aAAA,EAAA,IARA;AASA,MAAA,YAAA,EAAA,IATA;AAUA,MAAA,IAAA,EAAA;AACA,QAAA,cAAA,EAAA,EADA;AAEA,QAAA,aAAA,EAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA;AAFA;AAVA,KAAA;AAeA,GAvBA;AAyBA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,qBACA;AACA,MAAA,MAAA,CAAA,QAAA,CAAA,MAAA;AACA,KAHA;AAMA,IAAA,UANA,sBAMA,EANA,EAMA;AACA,WAAA,OAAA,CAAA,IAAA,mBAAA,EAAA;AACA,KARA;AASA,IAAA,UATA,wBASA;AACA,WAAA,KAAA,CAAA,YAAA,EAAA,KAAA,IAAA,CAAA,EAAA,GAAA,KAAA,OAAA,EAAA;AACA,KAXA;AAYA,IAAA,UAZA,sBAYA,EAZA,EAYA;AACA,WAAA,OAAA,CAAA,IAAA,iBAAA,EAAA;AACA,KAdA;AAeA,IAAA,eAfA,2BAeA,EAfA,EAeA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,UAAA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,aAAA,EAAA;AACA,QAAA,EAAA,EAAA,EADA;AAEA,QAAA,IAAA,EAAA,KAAA;AAFA,OAAA;AAIA,WAAA,IAAA,CAAA,cAAA,GAAA,EAAA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,UAAA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,aAAA,EAAA,KAAA,IAAA,CAAA,EAAA;AACA,KAxBA;AAyBA,IAAA,aAzBA,yBAyBA,EAzBA,EAyBA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,eAAA,EAAA,EAAA,GAAA,KAAA,OAAA,EAAA;AACA;AA3BA;AAzBA,CAAA","sourcesContent":["<template>\r\n  <div>\r\n    \r\n    <v-card class=\"mx-auto mb-6\">\r\n      <div>\r\n        <div class=\"d-flex justify-space-between\">\r\n          <v-card-title class=\"post-title\">\r\n           \r\n            <div class=\"nom-date mt-3\">\r\n              <span class=\"ml-3\">{{ post.User.pseudo }}</span>\r\n            </div>\r\n          </v-card-title>\r\n          <div class=\"options\">\r\n            <v-tooltip v-if=\"$store.state.user.id == post.User.id\" bottom>\r\n              <template v-slot:activator=\"{ on, attrs }\">\r\n                <v-btn\r\n                  class=\"mx-2\"\r\n                  primary\r\n                  x-small\r\n                  v-bind=\"attrs\"\r\n                  v-on=\"on\"\r\n                  aria-label=\"modifier le post\"\r\n                  @click=\"getOnePost(post.id)\"\r\n                >\r\n                  Modifier\r\n                </v-btn>\r\n              </template>\r\n              <span>Modifier</span>\r\n            </v-tooltip>\r\n            \r\n            <v-tooltip\r\n              v-if=\"\r\n                $store.state.user.id === post.User.id ||\r\n                  $store.state.user.admin === true\r\n              \"\r\n            >\r\n              <template v-slot:activator=\"{ on, attrs }\">\r\n                <v-btn\r\n                  class=\"mx-2\"\r\n                  primary\r\n                  x-small\r\n                  v-bind=\"attrs\"\r\n                  v-on=\"on\"\r\n                  aria-label=\"supprimer le post\"\r\n                  @click=\"deletePost(post.id)\"\r\n                >\r\n                 Supprimer\r\n                </v-btn>\r\n              </template>\r\n              <span>Supprimer</span>\r\n            </v-tooltip>\r\n          </div>\r\n        </div>\r\n        <div class=\"pl-3 pr-2-3\">\r\n          <v-card-text class=\"text-left\">\r\n            <p class=\"body-1\">\r\n              {{ post.message }}\r\n            </p>\r\n          </v-card-text>\r\n        </div>\r\n        <div>\r\n          <v-img\r\n            v-if=\"post.link\"\r\n            :src=\"post.link\"\r\n            alt=\"image\"\r\n            :max-height=\"450\"\r\n            :max-width=\"550\"\r\n            class=\"mx-auto\"\r\n          >\r\n          </v-img>\r\n          <v-img\r\n            v-if=\"post.imageUrl\"\r\n            :src=\"post.imageUrl\"\r\n            alt=\"image\"\r\n            :max-height=\"705\"\r\n            :max-width=\"505\"\r\n            class=\"mx-auto\"\r\n          >\r\n          </v-img>\r\n        </div>\r\n        <v-divider></v-divider>\r\n        <div class=\"d-flex flex-column align-end pr-3\">\r\n          <div>{{ post.Comments.length }} commentaire(s)</div>\r\n        </div>\r\n        <v-divider></v-divider>\r\n        <v-card-actions class=\"pt-5  pr-4 d-flex justify-space-between\">\r\n          <div class=\" d-flex justify-md-space-between\">\r\n            <v-btn @click=\"show = !show\" text>\r\n              Voir les commentaires\r\n            </v-btn>\r\n          </div>\r\n        </v-card-actions>\r\n        <div>\r\n          <div v-show=\"show\">\r\n            <v-divider></v-divider>\r\n            <div class=\"comments-box d-flex flex-column justify-center\">\r\n              <v-card-text class=\"comment-input\">\r\n                <v-form\r\n                  v-model=\"isValid\"\r\n                  @submit.prevent=\"onSubmitComment(post.id)\"\r\n                  enctype=\"multipart/form-data\"\r\n                  class=\"validate comment-form\"\r\n                >\r\n                  <v-text-field\r\n                    name=\"input-1-3\"\r\n                    label=\"commentez\"\r\n                    v-model=\"data.commentMessage\"\r\n                  >\r\n                  </v-text-field>\r\n                  <v-btn\r\n                  type=\"submit\"\r\n                    @click=\"onSubmitComment(post.id)\"\r\n                    :disabled=\"!isValid\"\r\n                    >Poster</v-btn\r\n                  >\r\n                </v-form>\r\n                <div>\r\n                  <div class=\"danger-alert\" v-html=\"errorMessage\" />\r\n                  <div class=\"danger-alert\" v-html=\"messageRetour\" />\r\n                </div>\r\n              </v-card-text>\r\n              <v-list\r\n                v-for=\"comment in post.Comments\"\r\n                :key=\"comment.id\"\r\n                :comment=\"comment\"\r\n              >\r\n                <v-list-item>\r\n                  <v-list-item-content>\r\n                    <v-list-item-title \r\n                      v-html=\"comment.User.pseudo\"\r\n                    ></v-list-item-title>\r\n                    <v-list-item-subtitle\r\n                      v-html=\"comment.message\"\r\n                    ></v-list-item-subtitle>\r\n                  </v-list-item-content>\r\n\r\n                  <v-tooltip bottom>\r\n                    <template\r\n                      v-if=\"\r\n                        $store.state.user.id === comment.UserId ||\r\n                          $store.state.user.admin === true\r\n                      \"\r\n                      v-slot:activator=\"{ on, attrs }\"\r\n                    >\r\n                      <v-btn \r\n                      type=\"submit\"\r\n                      small v-bind=\"attrs\" v-on=\"on\">\r\n                        <i class=\"fas fa-trash\"\r\n                         @click=\"deleteComment(comment.id)\">                    \r\n                        </i>\r\n                      </v-btn>\r\n                    </template>\r\n                    <span>Supprimer</span>\r\n                  </v-tooltip>\r\n                </v-list-item>\r\n                <v-divider></v-divider>\r\n              </v-list>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </v-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: \"Posts\",\r\n  props: {\r\n    post: {\r\n      type: Object,\r\n    },\r\n  },\r\n  data: function() {\r\n    return {\r\n      show: false,\r\n      user: false,\r\n      update: false,\r\n      isValid: true,\r\n      rules: {\r\n        required: (value) => !!value || \"Champs recquis\",\r\n      },\r\n      messageRetour: null,\r\n      errorMessage: null,\r\n      data: {\r\n        commentMessage: \"\",\r\n        commentPseudo: this.$store.state.user.pseudo,\r\n      },\r\n    };\r\n  },\r\n \r\n  methods: {\r\nrefresh() {\r\n  window.location.reload();\r\n},\r\n    \r\n    \r\n    getProfile(id) {\r\n      this.$router.push(`/profil/${id}`);\r\n    },\r\n    deletePost() {\r\n      this.$emit(\"deletePost\", this.post.id),this.refresh();\r\n    },\r\n    getOnePost(id) {\r\n      this.$router.push(`posts/${id}`);\r\n    },\r\n    onSubmitComment(id) {\r\n      this.$store.dispatch(\"getPosts\");\r\n      this.$store.dispatch(\"commentPost\", {\r\n        id: id,\r\n        data: this.data,\r\n      });\r\n      this.data.commentMessage = \"\";\r\n      this.$store.dispatch(\"getPosts\");\r\n      this.$store.dispatch(\"getPostById\", this.post.id);\r\n    },\r\n    deleteComment(id) {\r\n      this.$store.dispatch(\"deleteComment\", id), this.refresh();\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.options{\r\n  margin-top: 30px;\r\n}\r\n\r\n</style>"],"sourceRoot":"src/components"}]}
{"remainingRequest":"C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Awa\\SocialNetwork\\frontend\\src\\components\\Posts.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Awa\\SocialNetwork\\frontend\\src\\components\\Posts.vue","mtime":1621922422125},{"path":"C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Awa\\SocialNetwork\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIlBvc3RzIiwNCiAgcHJvcHM6IHsNCiAgICBwb3N0OiB7DQogICAgICB0eXBlOiBPYmplY3QsDQogICAgfSwNCiAgICANCiAgfSwNCiAgZGF0YTogZnVuY3Rpb24oKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHNob3c6IGZhbHNlLA0KICAgICAgdXNlcjogZmFsc2UsDQogICAgICB1cGRhdGU6IGZhbHNlLA0KICAgICAgaXNWYWxpZDogdHJ1ZSwNCiAgICAgIHJ1bGVzOiB7DQogICAgICAgIHJlcXVpcmVkOiAodmFsdWUpID0+ICEhdmFsdWUgfHwgIkNoYW1wcyByZWNxdWlzIiwNCiAgICAgIH0sDQogICAgICBtZXNzYWdlUmV0b3VyOiBudWxsLA0KICAgICAgZXJyb3JNZXNzYWdlOiBudWxsLA0KICAgICAgZGF0YTogew0KICAgICAgICBjb21tZW50TWVzc2FnZTogIiIsDQogICAgICAgIGNvbW1lbnRQc2V1ZG86IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIucHNldWRvLA0KICAgICAgfSwNCiAgICB9Ow0KICB9LA0KDQogIA0KIA0KICBtZXRob2RzOiB7DQpyZWZyZXNoKCkgew0KICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7DQp9LA0KICAgIA0KICAgIA0KICAgIGdldFByb2ZpbGUoaWQpIHsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKGAvcHJvZmlsLyR7aWR9YCk7DQogICAgfSwNCiAgICBkZWxldGVQb3N0KCkgew0KICAgICAgdGhpcy4kZW1pdCgiZGVsZXRlUG9zdCIsIHRoaXMucG9zdC5pZCksdGhpcy5yZWZyZXNoKCk7DQogICAgfSwNCiAgICBnZXRPbmVQb3N0KGlkKSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaChgcG9zdHMvJHtpZH1gKTsNCiAgICB9LA0KICAgIG9uU3VibWl0Q29tbWVudChpZCkgew0KICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldFBvc3RzIik7DQogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiY29tbWVudFBvc3QiLCB7DQogICAgICAgIGlkOiBpZCwNCiAgICAgICAgZGF0YTogdGhpcy5kYXRhLA0KICAgICAgfSk7DQogICAgICB0aGlzLmRhdGEuY29tbWVudE1lc3NhZ2UgPSAiIjsNCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRQb3N0cyIpOw0KICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldFBvc3RCeUlkIiwgdGhpcy5wb3N0LmlkKTsNCiAgICB9LA0KICAgIGRlbGV0ZUNvbW1lbnQoaWQpIHsNCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJkZWxldGVDb21tZW50IiwgaWQpLCB0aGlzLnJlZnJlc2goKTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["Posts.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuKA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Posts.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    \r\n    <v-card class=\"mx-auto mb-6\">\r\n      <div>\r\n        <div class=\"d-flex justify-space-between\">\r\n          <v-card-title class=\"post-title\">\r\n           \r\n            <div class=\"nom-date mt-3\">\r\n              <span class=\"ml-3\">{{ post.User.pseudo }}</span>\r\n            </div>\r\n          </v-card-title>\r\n          <div class=\"options\">\r\n            <v-tooltip v-if=\"$store.state.user.id == post.User.id\" bottom>\r\n              <template v-slot:activator=\"{ on, attrs }\">\r\n                <v-btn\r\n                  class=\"mx-2\"\r\n                  primary\r\n                  x-small\r\n                  v-bind=\"attrs\"\r\n                  v-on=\"on\"\r\n                  aria-label=\"modifier le post\"\r\n                  @click=\"getOnePost(post.id)\"\r\n                >\r\n                  Modifier\r\n                </v-btn>\r\n              </template>\r\n              <span>Modifier</span>\r\n            </v-tooltip>\r\n            \r\n            <v-tooltip\r\n              v-if=\"\r\n                $store.state.user.id === post.User.id ||\r\n                  $store.state.user.admin === true\r\n              \"\r\n            >\r\n              <template v-slot:activator=\"{ on, attrs }\">\r\n                <v-btn\r\n                  class=\"mx-2\"\r\n                  primary\r\n                  x-small\r\n                  v-bind=\"attrs\"\r\n                  v-on=\"on\"\r\n                  aria-label=\"supprimer le post\"\r\n                  @click=\"deletePost(post.id)\"\r\n                >\r\n                 Supprimer\r\n                </v-btn>\r\n              </template>\r\n              <span>Supprimer</span>\r\n            </v-tooltip>\r\n          </div>\r\n        </div>\r\n        <div class=\"pl-3 pr-2-3\">\r\n          <v-card-text class=\"text-left\">\r\n            <p class=\"body-1\">\r\n              {{ post.message }}\r\n            </p>\r\n          </v-card-text>\r\n        </div>\r\n        <div>\r\n          <v-img\r\n            v-if=\"post.link\"\r\n            :src=\"post.link\"\r\n            alt=\"image\"\r\n            :max-height=\"450\"\r\n            :max-width=\"550\"\r\n            class=\"mx-auto\"\r\n          >\r\n          </v-img>\r\n          <v-img\r\n            v-if=\"post.imageUrl\"\r\n            :src=\"post.imageUrl\"\r\n            alt=\"image\"\r\n            :max-height=\"705\"\r\n            :max-width=\"505\"\r\n            class=\"mx-auto\"\r\n          >\r\n          </v-img>\r\n        </div>\r\n        <v-divider></v-divider>\r\n        <div class=\"d-flex flex-column align-end pr-3\">\r\n          <div>{{ post.Comments.length }} commentaire(s)</div>\r\n        </div>\r\n        <v-divider></v-divider>\r\n        <v-card-actions class=\"pt-5  pr-4 d-flex justify-space-between\">\r\n          <div class=\" d-flex justify-md-space-between\">\r\n            <v-btn @click=\"show = !show\" text>\r\n              Voir les commentaires\r\n            </v-btn>\r\n          </div>\r\n        </v-card-actions>\r\n        <div>\r\n          <div v-show=\"show\">\r\n            <v-divider></v-divider>\r\n            <div class=\"comments-box d-flex flex-column justify-center\">\r\n              <v-card-text class=\"comment-input\">\r\n                <v-form\r\n                  v-model=\"isValid\"\r\n                  @submit.prevent=\"onSubmitComment(post.id)\"\r\n                  enctype=\"multipart/form-data\"\r\n                  class=\"validate comment-form\"\r\n                >\r\n                  <v-text-field\r\n                    name=\"input-1-3\"\r\n                    label=\"commentez\"\r\n                    v-model=\"data.commentMessage\"\r\n                  >\r\n                  </v-text-field>\r\n                  <v-btn\r\n                  type=\"submit\"\r\n                    @click=\"onSubmitComment(post.id)\"\r\n                    :disabled=\"!isValid\"\r\n                    >Poster</v-btn\r\n                  >\r\n                </v-form>\r\n                <div>\r\n                  <div class=\"danger-alert\" v-html=\"errorMessage\" />\r\n                  <div class=\"danger-alert\" v-html=\"messageRetour\" />\r\n                </div>\r\n              </v-card-text>\r\n              <v-list\r\n                v-for=\"comment in post.Comments\"\r\n                :key=\"comment.id\"\r\n                :comment=\"comment\"\r\n              >\r\n                <v-list-item>\r\n                  <v-list-item-content>\r\n                    <v-list-item-title \r\n                      v-html=\"comment.User.pseudo\"\r\n                    ></v-list-item-title>\r\n                    <v-list-item-subtitle\r\n                      v-html=\"comment.message\"\r\n                    ></v-list-item-subtitle>\r\n                  </v-list-item-content>\r\n\r\n                  <v-tooltip bottom>\r\n                    <template\r\n                      v-if=\"\r\n                        $store.state.user.id === comment.UserId ||\r\n                          $store.state.user.admin === true\r\n                      \"\r\n                      v-slot:activator=\"{ on, attrs }\"\r\n                    >\r\n                      <v-btn \r\n                      type=\"submit\"\r\n                      small v-bind=\"attrs\" v-on=\"on\">\r\n                        <i class=\"fas fa-trash\"\r\n                         @click=\"deleteComment(comment.id)\">                    \r\n                        </i>\r\n                      </v-btn>\r\n                    </template>\r\n                    <span>Supprimer</span>\r\n                  </v-tooltip>\r\n                </v-list-item>\r\n                <v-divider></v-divider>\r\n              </v-list>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </v-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: \"Posts\",\r\n  props: {\r\n    post: {\r\n      type: Object,\r\n    },\r\n    \r\n  },\r\n  data: function() {\r\n    return {\r\n      show: false,\r\n      user: false,\r\n      update: false,\r\n      isValid: true,\r\n      rules: {\r\n        required: (value) => !!value || \"Champs recquis\",\r\n      },\r\n      messageRetour: null,\r\n      errorMessage: null,\r\n      data: {\r\n        commentMessage: \"\",\r\n        commentPseudo: this.$store.state.user.pseudo,\r\n      },\r\n    };\r\n  },\r\n\r\n  \r\n \r\n  methods: {\r\nrefresh() {\r\n  window.location.reload();\r\n},\r\n    \r\n    \r\n    getProfile(id) {\r\n      this.$router.push(`/profil/${id}`);\r\n    },\r\n    deletePost() {\r\n      this.$emit(\"deletePost\", this.post.id),this.refresh();\r\n    },\r\n    getOnePost(id) {\r\n      this.$router.push(`posts/${id}`);\r\n    },\r\n    onSubmitComment(id) {\r\n      this.$store.dispatch(\"getPosts\");\r\n      this.$store.dispatch(\"commentPost\", {\r\n        id: id,\r\n        data: this.data,\r\n      });\r\n      this.data.commentMessage = \"\";\r\n      this.$store.dispatch(\"getPosts\");\r\n      this.$store.dispatch(\"getPostById\", this.post.id);\r\n    },\r\n    deleteComment(id) {\r\n      this.$store.dispatch(\"deleteComment\", id), this.refresh();\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.options{\r\n  margin-top: 30px;\r\n}\r\n\r\n</style>"]}]}